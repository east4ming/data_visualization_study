# data_visualization_study

学习数据可视化案例.
包括:

- matplotlib
- Pygal
- json
- datetime
- csv处理
- API
- requests

## 生成数据

**数据可视化**: 通过可视化表示来探索数据, 它与**数据挖掘**紧密相关, 数据挖掘指的是使用代码来探索数据集的规律和关联.
漂亮的呈现数据关乎的并非仅仅是漂亮的图片. 以引人注目的简洁方式呈现数据, 然观看者能够明白其中含义, 发现数据集中原本未意识到的规律和意义.
数据可视化最流行的工具之一就是*matplotlib*, 它是一个数学绘图库, 用它来制作简单的图表, 如折线图和散点图.
然后, 基于随机漫步概念, 根据一系列决策生成图表.

使用*Pygal*包, 它专注于生成适合在数字设备上显示的图表. 通过*Pygal*, 可在用户与图表交互时突出元素及调整其大小, 还可轻松调整整个图表尺寸,
使其适合在微型智能手表或巨型显示器上显示. 我们使用*Pygal*以各种方式探索掷色子的结果.

### 安装 matplotlib

####  matplotlib 画廊

> https://matplotlib.org/gallery/index.html

### 绘制简单折线图

绘制简单折线图, 再对其进行定制, 以实现信息更丰富的数据可视化. 使用平方数序列1/4/9/16/25来绘制图表.

> 见*mpl_squares.py*

- 导入`matplotlib.pyplot`为`plt`
- `plt.plot()`根据数据绘制有意义的图形
- `plt.show()`打开 matplotlib 查看器, 并显示绘制的图形.

#### 修改标签文字和线条粗细

上图: 标签文字太小, 线条太细.
通过一些定制来改善图形可读性.

> 见*mpl_squares.py*

#### 校正图形

发现没有正确地绘制数据: 4的平方时25. 下面修复该问题.
当向plot()提供数字时, 它假设第一个数据点对应的x坐标值为0, 但我们的应该为1. 这种情况, 可以给`plot()`提供输入值和输出值.

> 见*mpl_squares.py*

#### 使用 scatter() 绘制散点图并设置其样式

有时候, 需要绘制散点图并设置各个数据点的样式.
要绘制单个点, 可使用函数`scatter()`, 并向它传递一对x和y坐标, 它将在指定位置绘制一个点.

> 见*scatter_squares.py*

#### 使用 scatter() 绘制一系列点

要绘制一系列的点, 可向 `scatter()` 传递两个分别包含x和y的列表.

> 见*scatter_squares.py*

#### 自动计算数据

绘制1000个点的代码, 让Python自动循环计算.

> 见*scatter_squares.py*

#### 删除数据点的轮廓

matplotlib 允许你给散点图的个个点指定颜色. 默认为:蓝色点和黑色轮廓. 绘制很多点时, 黑色轮廓会粘连在一起.
要删除数据点的轮廓, 可以在调用 `scatter()` 时传递实参`edgecolor='none'`

> 2.0 之后的版本, edgecolor默认为'none'

#### 自定义颜色

修改数据点颜色, 可以向`scatter()`传递参数c, 并将其设置为要使用的颜色名称.
还可以使用RGB颜色自定义颜色. 要指定自定义颜色, 向参数c传递一个元组, 包含3个0-1的小数值, 分别表示红色, 绿色, 蓝色分量.
值越接近0, 指定颜色越深, 值越接近1, 指定颜色越浅.

#### 使用颜色映射

*颜色映射(colormap)*是一系列颜色, 从起始颜色渐变到结束颜色. 在可视化中, 颜色映射用于突出数据的规律.

> 见*scatter_squares.py*
>
> 要了解`pyplot`中的所有颜色映射, 访问官网, 单击Examples, 向下滚动到Color Examples, 再单击colormaps_reference.

#### 自动保存图表

要让程序自动将图表保存到文件中, 可将对`plt.show()`的调用替换为对`plt.savafig()`的调用.

### 随机漫步

使用Python来生成随机漫步数据, 再使用*matplotlib* 将数据呈现出来.
*随机漫步*: 这样行走的路径, 每次行走完全是随机的, 没有明确的方向, 结果是由一系列随机决策决定的.
在自然界/物理学/生物学/化学/经济领域, 随机漫步都有实际用途. 如: 漂浮在水滴上的花粉因不断受水分子的挤压而在水面上移动. 水滴中的分子运动是随机的, 因此
花粉在水面上的运动路径犹如随机漫步.

#### 创建 RandomWalk() 类

为做出随机决策, 将所有可能的选择都存储在一个列表中, 并在每次做决策时都使用`choice()`来决定使用哪种选择.
将随机漫步包含的默认点数设置为5000.

> 见*random_walk.py*

#### 选择方向

> 见*random_walk.py*

建立一个循环, 该循环不断运行, 直到漫步包含所需数量的点. 方法决策:

- 向左还是向右? 走多远?
- 向上还是向下? 走多远?

使用`choice([-1, 1])指定方向, 使用`choice([0, 1, 2, 3, 4])`指定走多远. (通过包含0, 不仅能沿2个轴移动, 还能够沿一个轴移动)

如果`x_step`和`y_step`都为0, 意味着原地踏步, 拒绝这样的情况, 接着执行下一次循环.
为获取漫步中下一个点的x值, 将`x_step`与`x_values`中的最后一个值相加. 并把计算的值附加到列表的末尾.

#### 绘制随机漫步图

> 见*rw_visual.py*

- 创建RandomWalk实例
- 调用fill_walk()
- 将x y 值传递给`scatter()`, 并选择合适的点的尺寸.

#### 模拟多次随机漫步

> 见*rw_visual.py*

#### 设置随机漫步图的样式

本节将定制图表, 以突出每次漫步的重要特征, 并让分散注意力的元素不那么明显. 为此, 确定要突出的元素, 如漫步的起点/终点/经过的路径.
接下来要确定使其不那么显眼的元素, 如刻度标记和标签. 最终的结果是简单的可视化表示, 清楚地指出每次漫步经过的路径.

#### 给点着色

使用颜色映射来指出漫步中个点的先后顺序.

> 见*rw_visual.py*

#### 重新绘制起点/终点

在绘制随机漫步图后重新绘制起点和终点. 让起点和终点变得更大, 并显示为不同的颜色.

> 见*rw_visual.py*

#### 隐藏坐标轴

> 见*rw_visual.py*

#### 增加点数

增加点数, 以提供更多数据.

> 见*rw_visual.py*

#### 调整尺寸以适合屏幕

让绘图窗口更适合屏幕大小.

> 见*rw_visual.py*

`figure()`用于指定图表的宽度/高度/分辨率/背景色. 给形参figsize一个元组, 指出绘图窗口尺寸, 单位为英寸.
Python假定屏幕分辨率为100像素/英寸. 可使用形参dpi向`figure()`传递分辨率.

### 使用 Pygal 模拟掷色子

本节中, 使用Python可视化包 Pygal 来生成可所犯的矢量图形文件. 对于需要在尺寸不同的屏幕上展示的图表很有用, 因为它们将自动缩放, 以适合观看者的屏幕.
如果打算以在线方式使用图表, 考虑使用 Pygal 来生成, 这样它们在任何设备上显示都很美观.

掷色子, 2个, 某些点数可能性将比其他点数打. 为确定哪些点数出现的可能性最大, 将生成一个表示掷色子结果的数据集, 并根据结果绘制图形.
在数学领域, 使用掷色子来解释各种数据分析, 在赌场和游戏中也有实际应用.

#### 安装 Pygal

#### Pygal 画廊

> http://pygal.org/en/stable/documentation/types/index.html

#### 创建 Die 类

> 见*die.py*

#### 掷骰子

> 见*die_visual.py*

#### 分析结果

为分析掷6面骰子的结果, 计算每个点数的出现次数

> 见*die_visual.py*

#### 绘制直方图

> 见*die_visual.py*

#### 同时掷2个骰子

> 见*die_visual.py*

#### 同时掷两个面数不同的骰子

创建一个6面和10面的骰子. 掷50000次.

> 见*different_dice.py*

### 作业

#### 同时掷3个骰子

#### 将点数相乘

#### 使用2个库

使用*matplotlib* 可视化模拟掷骰子;
使用*Pygal* 可视化模拟随机漫步.

### 小结

- 如何生成数据集
- 如何对其可视化
- 如何使用*matplotlib*创建简单图表
- 如何使用散点图探索随机漫步过程
- 如何使用Pygal创建直方图
- 如何使用直方图展示掷骰子结果

> 尝试对网上的各类图表进行code
